{"version":3,"file":"main.0dfb18db7ce1c8405346.hot-update.js","sources":["webpack:///./src/common/students/StudentsActions.js"],"sourcesContent":["// IMPORTS\n// Externals imports (Dependencies)\nimport axios from 'axios'\n\n// Internal imports\nimport config from '../../config'\nimport consts from '../../consts'\nimport action, { actionFailed } from '../../util/action'\nimport createAsyncConst from '../../util/createAsyncConst'\n\nexport const REMOVE_STUDENT = createAsyncConst('REMOVE_STUDENT')\nexport const SUBMIT_STUDENT = createAsyncConst('SUBMIT_STUDENT')\nexport const FETCH_STUDENT = createAsyncConst('FETCH_STUDENT')\nexport const EDIT_STUDENT = createAsyncConst('EDIT_STUDENT')\n\nexport function fetchStores(page, filters = [], rows) {\n  return dispatch => {\n    dispatch(action(FETCH_STUDENT.ACTION))\n    return axios\n      .get(\n        `${config.API_URL}/students?filters=${JSON.stringify(\n          filters\n        )}&&page=${page}&&rows=${rows || consts.DEFAULT_PAGINATION}`,\n        {\n          page,\n          filters,\n        }\n      )\n      .then(resp => {\n        dispatch(action(FETCH_STUDENT.SUCCESS, resp.data))\n        return resp\n      })\n      .catch(e => dispatch(actionFailed(FETCH_STUDENT, e)))\n  }\n}\n\nexport function edit(id) {\n  return dispatch => {\n    dispatch(action(EDIT_STUDENT.ACTION, { id }))\n    return axios\n      .get(`${config.API_URL}/students/${id}`)\n      .then(resp => resp.data.data.items)\n      .then(data => dispatch(action(EDIT_STUDENT.SUCCESS, data)))\n      .catch(e => dispatch(actionFailed(EDIT_STUDENT, e)))\n  }\n}\n\nexport function post(values) {\n  return submit(values, 'post')\n}\n\nexport function update(values) {\n  return submit(values, 'put')\n}\n\nfunction submit(values, method) {\n  const id = values.id ? `/${values.id}` : ''\n\n  return dispatch => {\n    dispatch(action(SUBMIT_STUDENT.ACTION))\n    return axios[method](`${config.API_URL}/students/${id}`, values)\n      .then(resp => resp.data)\n      .then(data => {\n        dispatch(action(SUBMIT_STUDENT.SUCCESS, data))\n        dispatch(fetchStudents())\n        return data\n      })\n      .catch(e => dispatch(actionFailed(SUBMIT_STUDENT, e)))\n  }\n}\n\nexport function destroy(id) {\n  return dispatch => {\n    dispatch(action(REMOVE_STUDENT.ACTION))\n    return axios\n      .delete(`${config.API_URL}/students/${id}`)\n      .then(resp => resp.data)\n      .then(data => {\n        dispatch(action(REMOVE_STUDENT.SUCCESS, data))\n        dispatch(fetchStudents())\n        return data\n      })\n      .catch(e => actionFailed(REMOVE_STUDENT.FAILURE, e))\n  }\n}\n"],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AAMA;AACA;AAFA;AAMA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;A","sourceRoot":""}