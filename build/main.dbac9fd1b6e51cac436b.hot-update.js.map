{"version":3,"file":"main.dbac9fd1b6e51cac436b.hot-update.js","sources":["webpack:///./src/common/users/UserActions.js"],"sourcesContent":["// IMPORTS\r\n// External\r\nimport axios from 'axios/index'\r\n\r\n// Internal\r\nimport config from '../../config'\r\nimport action, { actionFailed } from '../../util/action'\r\nimport createAsyncConst from '../../util/createAsyncConst'\r\n\r\nexport const REMOVE_USER = createAsyncConst('REMOVE_USER')\r\nexport const SUBMIT_USER = createAsyncConst('SUBMIT_USER')\r\nexport const FETCH_USER = createAsyncConst('FETCH_USER')\r\nexport const EDIT_USER = createAsyncConst('EDIT_USER')\r\n\r\nexport function fetchUsers(page, filters = []) {\r\n  return dispatch => {\r\n    dispatch(action(FETCH_USER.ACTION))\r\n    return axios\r\n      .get(`${config.API_URL}/users?filters=` + JSON.stringify(filters), {\r\n        page,\r\n        filters,\r\n      })\r\n      .then(resp => {\r\n        dispatch(action(FETCH_USER.SUCCESS, resp.data))\r\n        return resp\r\n      })\r\n      .catch(e => dispatch(actionFailed(FETCH_USER, e)))\r\n  }\r\n}\r\n\r\nexport function edit(id) {\r\n  return dispatch => {\r\n    dispatch(action(EDIT_USER.ACTION, { id }))\r\n    return axios\r\n      .get(`${config.API_URL}/users/${id}`)\r\n      .then(resp => resp.data.data.item)\r\n      .then(data => dispatch(action(EDIT_USER.SUCCESS, data)))\r\n      .catch(e => dispatch(actionFailed(EDIT_USER, e)))\r\n  }\r\n}\r\n\r\nexport function post(values) {\r\n  return submit(values, 'post')\r\n}\r\n\r\nexport function update(values) {\r\n  return submit(values, 'put')\r\n}\r\n\r\nfunction submit(values, method) {\r\n  const id = values.id ? `/${values.id}` : ''\r\n\r\n  return dispatch => {\r\n    dispatch(action(SUBMIT_USER.ACTION))\r\n    return axios[method](`${config.API_URL}/users${id}`, values)\r\n      .then(resp => resp.data)\r\n      .then(data => {\r\n        dispatch(action(SUBMIT_USER.SUCCESS, data))\r\n        return data\r\n      })\r\n      .catch(e => dispatch(actionFailed(SUBMIT_USER, e)))\r\n  }\r\n}\r\n\r\nexport function destroy(id) {\r\n  return dispatch => {\r\n    dispatch(action(REMOVE_USER.ACTION))\r\n    return axios\r\n      .delete(`${config.API_URL}/user/${id}`)\r\n      .then(resp => resp.data)\r\n      .then(data => {\r\n        dispatch(action(REMOVE_USER.SUCCESS, data))\r\n        dispatch(fetchUsers())\r\n      })\r\n      .catch(e => actionFailed(REMOVE_USER.FAILURE, e))\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAFA;AAKA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;A","sourceRoot":""}