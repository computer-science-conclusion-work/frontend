{"version":3,"file":"main.e6cdfb893c040dbd8117.hot-update.js","sources":["webpack:///./src/common/auth/AuthActions.js"],"sourcesContent":["// IMPORTS\n// External\nimport axios from 'axios'\n\n// Internal\nimport consts from '../../config'\nimport action from '../../util/action'\nimport createAsyncConst from '../../util/createAsyncConst'\n\nexport const AUTHENTICATE = createAsyncConst('AUTHENTICATE')\nexport const AUTHENTICATED_USER = createAsyncConst('AUTHENTICATED_USER')\nexport const LOGOUT = createAsyncConst('LOGOUT')\nexport const CHECK_AUTH = 'CHECK_AUTH'\n\nexport function login(values) {\n  values.grant_type = consts.API_GRANT\n  values.client_id = consts.API_CLIENT\n  values.client_secret = consts.API_SECRET\n  return submit(values, `${consts.API_URL}/auth/login`)\n}\n\nexport function fetchAuthenticatedUser() {\n  return dispatch => {\n    dispatch(action(AUTHENTICATED_USER.ACTION))\n    axios\n      .get(`${consts.API_URL}/user/init`)\n      .then(resp => resp.data)\n      .then(data => dispatch(action(AUTHENTICATED_USER.SUCCESS, data)))\n      .catch(e =>\n        dispatch(action(AUTHENTICATED_USER.FAILURE, null, e.response.data))\n      )\n  }\n}\n\nexport function submit(values, url) {\n  return dispatch => {\n    dispatch(action(AUTHENTICATE.ACTION))\n    axios\n      .post(url, values)\n      .then(resp => resp.data)\n      .then(data => {\n        console.log(data)\n        dispatch(action(AUTHENTICATE.SUCCESS, data))\n        fetchAuthenticatedUser()(dispatch)\n      })\n      .catch(e => dispatch(action(AUTHENTICATE.FAILURE, null, e.response.data)))\n  }\n}\n\nexport function logout() {\n  return dispatch => {\n    dispatch(action(LOGOUT.ACTION))\n    return axios\n      .post(`${consts.API_URL}/logout`)\n      .then(data => {\n        dispatch(action(LOGOUT.SUCCESS, data.data))\n      })\n      .catch(e => dispatch(action(LOGOUT.FAILURE, null, e.response.data)))\n  }\n}\n\nexport function checkAuth() {\n  return action(CHECK_AUTH)\n}\n"],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAGA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;;;;A","sourceRoot":""}